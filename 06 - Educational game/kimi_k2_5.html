<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atomic Architects: The Chemistry Board Game</title>
    <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.2.0/dist/svg.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0c0e1b 0%, #1a1d3d 100%);
            color: #fff;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        #game-container {
            flex: 1;
            position: relative;
            width: 100%;
            height: 100%;
        }

        #svg-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* UI Overlay */
        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }

        .panel {
            pointer-events: auto;
            background: rgba(16, 20, 40, 0.95);
            border: 2px solid #00d9ff;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 30px rgba(0, 217, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        #top-bar {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .element-card {
            width: 80px;
            height: 100px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border: 2px solid #ffd700;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            transition: transform 0.3s;
        }

        .element-card:hover {
            transform: translateY(-5px);
        }

        .atomic-number {
            font-size: 12px;
            color: #aaa;
            align-self: flex-start;
            margin-left: 8px;
            margin-top: 5px;
        }

        .symbol {
            font-size: 28px;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .element-name {
            font-size: 10px;
            color: #ddd;
            margin-top: 5px;
        }

        #question-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 500px;
            max-width: 90%;
            display: none;
            text-align: center;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translate(-50%, -40%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }

        #question-text {
            font-size: 20px;
            margin-bottom: 20px;
            color: #00d9ff;
            line-height: 1.6;
        }

        .answer-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: rgba(0, 217, 255, 0.1);
            border: 2px solid #00d9ff;
            color: #fff;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            pointer-events: auto;
        }

        .answer-btn:hover {
            background: rgba(0, 217, 255, 0.3);
            transform: scale(1.02);
        }

        .answer-btn.correct {
            background: rgba(0, 255, 100, 0.3);
            border-color: #00ff64;
        }

        .answer-btn.wrong {
            background: rgba(255, 50, 50, 0.3);
            border-color: #ff3232;
        }

        #inventory {
            position: absolute;
            bottom: 20px;
            left: 20px;
            width: 300px;
            max-height: 200px;
        }

        #inventory h3 {
            color: #00d9ff;
            margin-bottom: 10px;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .inventory-slots {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .slot {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed #444;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s;
        }

        .slot.filled {
            background: rgba(0, 217, 255, 0.2);
            border-color: #00d9ff;
            border-style: solid;
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.3);
        }

        #controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .control-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #00d9ff 0%, #0066cc 100%);
            border: none;
            color: #fff;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 20px rgba(0, 217, 255, 0.4);
            transition: all 0.3s;
            pointer-events: auto;
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(0, 217, 255, 0.6);
        }

        .control-btn:disabled {
            background: #444;
            cursor: not-allowed;
            box-shadow: none;
        }

        #progress-bar {
            position: absolute;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }

        #progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d9ff, #ff00d9);
            width: 0%;
            transition: width 0.5s ease-out;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
        }

        .particle {
            position: absolute;
            pointer-events: none;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        #victory-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            display: none;
            background: rgba(16, 20, 40, 0.98);
            padding: 40px;
            border-radius: 20px;
            border: 3px solid #ffd700;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
        }

        #victory-modal h2 {
            font-size: 36px;
            color: #ffd700;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .molecule-display {
            font-size: 48px;
            margin: 20px 0;
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <svg id="svg-canvas"></svg>
        
        <div id="ui-layer">
            <div id="top-bar">
                <div class="element-card" id="current-element">
                    <div class="atomic-number">1</div>
                    <div class="symbol">H</div>
                    <div class="element-name">Hydrogen</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 24px; font-weight: bold; color: #00d9ff;">Atomic Architects</div>
                    <div style="font-size: 14px; color: #888;">Collect elements ‚Ä¢ Build molecules ‚Ä¢ Master chemistry</div>
                </div>
                <div class="element-card" id="target-element" style="opacity: 0.5;">
                    <div class="atomic-number">?</div>
                    <div class="symbol">?</div>
                    <div class="element-name">Target</div>
                </div>
            </div>

            <div id="progress-bar">
                <div id="progress-fill"></div>
            </div>

            <div id="question-modal" class="panel">
                <div id="question-text">Question goes here?</div>
                <div id="answers-container"></div>
            </div>

            <div id="inventory" class="panel">
                <h3>‚öõÔ∏è Atomic Inventory</h3>
                <div class="inventory-slots" id="inventory-slots">
                    <!-- Filled dynamically -->
                </div>
            </div>

            <div id="controls">
                <button class="control-btn" id="roll-btn" onclick="game.rollDice()">üé≤ Roll Dice</button>
                <button class="control-btn" onclick="game.restart()" style="background: linear-gradient(135deg, #ff0066 0%, #cc0052 100%);">üîÑ New Game</button>
            </div>

            <div id="victory-modal" class="panel">
                <h2>üéâ Molecule Complete!</h2>
                <div class="molecule-display" id="victory-molecule">H‚ÇÇO</div>
                <p style="font-size: 18px; margin: 20px 0; color: #ccc;">You've successfully built a water molecule!</p>
                <p style="color: #888; font-size: 14px;">Chemistry Master Status: Achieved</p>
                <button class="control-btn" onclick="game.restart()" style="margin-top: 20px;">Play Again</button>
            </div>
        </div>
    </div>

    <script>
        // Chemistry Questions Database
        const questionDB = [
            {
                q: "What is the atomic number of Carbon?",
                options: ["4", "6", "8", "12"],
                correct: 1,
                fact: "Carbon has 6 protons and is the basis of organic chemistry."
            },
            {
                q: "Which element is the most abundant in the universe?",
                options: ["Oxygen", "Carbon", "Hydrogen", "Helium"],
                correct: 2,
                fact: "Hydrogen makes up about 75% of the universe's mass."
            },
            {
                q: "What charge does a proton carry?",
                options: ["Negative", "Positive", "Neutral", "Variable"],
                correct: 1,
                fact: "Protons have a +1 charge and determine the element."
            },
            {
                q: "How many electrons can the first shell hold?",
                options: ["2", "8", "18", "32"],
                correct: 0,
                fact: "The first electron shell holds maximum 2 electrons."
            },
            {
                q: "Which gas is essential for human respiration?",
                options: ["Nitrogen", "Carbon Dioxide", "Oxygen", "Hydrogen"],
                correct: 2,
                fact: "Oxygen (O) is atomic number 8."
            },
            {
                q: "What type of bond shares electrons between atoms?",
                options: ["Ionic", "Covalent", "Metallic", "Hydrogen"],
                correct: 1,
                fact: "Covalent bonds share electron pairs between atoms."
            },
            {
                q: "What is the chemical symbol for Gold?",
                options: ["Go", "Gd", "Au", "Ag"],
                correct: 2,
                fact: "Au comes from the Latin 'aurum' meaning shining dawn."
            },
            {
                q: "How many protons does Oxygen have?",
                options: ["6", "7", "8", "16"],
                correct: 2,
                fact: "Oxygen has 8 protons and typically 8 neutrons."
            }
        ];

        // Game State
        const game = {
            svg: null,
            width: 0,
            height: 0,
            centerX: 0,
            centerY: 0,
            currentSpace: 0,
            elements: ['H', 'He', 'Li', 'Be', 'B', 'C', 'N', 'O', 'F', 'Ne', 
                      'Na', 'Mg', 'Al', 'Si', 'P', 'S', 'Cl', 'Ar', 'K', 'Ca'],
            elementNames: ['Hydrogen', 'Helium', 'Lithium', 'Beryllium', 'Boron',
                          'Carbon', 'Nitrogen', 'Oxygen', 'Fluorine', 'Neon',
                          'Sodium', 'Magnesium', 'Aluminium', 'Silicon', 'Phosphorus',
                          'Sulfur', 'Chlorine', 'Argon', 'Potassium', 'Calcium'],
            inventory: [],
            targetMolecule: ['H', 'H', 'O'], // H2O
            spaces: [],
            playerToken: null,
            diceValue: 0,
            isMoving: false,
            questionsUsed: new Set(),

            init() {
                this.svg = SVG().addTo('#svg-canvas').size('100%', '100%');
                this.width = window.innerWidth;
                this.height = window.innerHeight;
                this.centerX = this.width / 2;
                this.centerY = this.height / 2;
                
                this.drawBoard();
                this.createPlayer();
                this.initInventory();
                this.updateElementCard();
                
                window.addEventListener('resize', () => this.handleResize());
            },

            drawBoard() {
                // Draw orbital shells (concentric circles)
                const shells = 4;
                const maxRadius = Math.min(this.width, this.height) * 0.4;
                
                for (let i = 1; i <= shells; i++) {
                    const radius = (maxRadius / shells) * i;
                    
                    // Draw shell orbit
                    this.svg.circle(radius * 2)
                        .move(this.centerX - radius, this.centerY - radius)
                        .fill('none')
                        .stroke({ width: 2, color: '#00d9ff', opacity: 0.3 })
                        .attr('class', 'orbit');
                    
                    // Calculate spaces on this orbit
                    const spacesInShell = 5 + (i * 2);
                    for (let j = 0; j < spacesInShell; j++) {
                        const angle = (j / spacesInShell) * Math.PI * 2 - Math.PI/2;
                        const x = this.centerX + Math.cos(angle) * radius;
                        const y = this.centerY + Math.sin(angle) * radius;
                        
                        const spaceId = this.spaces.length;
                        const elementIndex = spaceId % this.elements.length;
                        
                        // Draw space
                        const group = this.svg.group();
                        
                        // Glow effect
                        group.circle(40).move(x - 20, y - 20)
                            .fill('rgba(0, 217, 255, 0.1)')
                            .stroke({ width: 2, color: '#00d9ff' });
                        
                        // Element symbol
                        group.text(this.elements[elementIndex])
                            .move(x, y)
                            .font({ size: 16, anchor: 'middle', family: 'Arial', weight: 'bold' })
                            .fill('#fff')
                            .cy(y);
                        
                        // Space number
                        group.text(spaceId.toString())
                            .move(x + 15, y - 15)
                            .font({ size: 10, anchor: 'middle' })
                            .fill('#888');
                        
                        // Store space data
                        this.spaces.push({
                            id: spaceId,
                            x: x,
                            y: y,
                            element: this.elements[elementIndex],
                            elementName: this.elementNames[elementIndex],
                            shell: i,
                            angle: angle
                        });
                    }
                }

                // Draw nucleus at center
                const nucleus = this.svg.group();
                nucleus.circle(80).move(this.centerX - 40, this.centerY - 40)
                    .fill('url(#nucleusGradient)')
                    .stroke({ width: 3, color: '#ffd700' });
                
                nucleus.text('START').move(this.centerX, this.centerY)
                    .font({ size: 14, anchor: 'middle', weight: 'bold' })
                    .fill('#fff')
                    .cy(this.centerY);
                
                // Define gradients
                const defs = this.svg.defs();
                const grad = defs.gradient('radial', function(add) {
                    add.stop(0, '#ffd700');
                    add.stop(1, '#ff8c00');
                }).attr('id', 'nucleusGradient');
            },

            createPlayer() {
                // Player is an electron
                this.playerToken = this.svg.group();
                
                // Electron glow
                this.playerToken.circle(30).move(-15, -15)
                    .fill('#00ff88')
                    .stroke({ width: 3, color: '#fff' })
                    .animate(1000)
                    .attr({ r: 18 })
                    .loop(true, true);
                
                // Electron symbol
                this.playerToken.text('e‚Åª').move(0, 0)
                    .font({ size: 14, anchor: 'middle', weight: 'bold' })
                    .fill('#000')
                    .cy(0);
                
                this.playerToken.move(this.spaces[0].x, this.spaces[0].y);
                this.currentSpace = 0;
            },

            initInventory() {
                const container = document.getElementById('inventory-slots');
                container.innerHTML = '';
                for (let i = 0; i < 6; i++) {
                    const slot = document.createElement('div');
                    slot.className = 'slot';
                    slot.id = `slot-${i}`;
                    container.appendChild(slot);
                }
            },

            rollDice() {
                if (this.isMoving) return;
                
                this.diceValue = Math.floor(Math.random() * 6) + 1;
                document.getElementById('roll-btn').textContent = `üé≤ ${this.diceValue}`;
                document.getElementById('roll-btn').disabled = true;
                
                this.movePlayer(this.diceValue);
            },

            movePlayer(steps) {
                this.isMoving = true;
                let stepCount = 0;
                
                const interval = setInterval(() => {
                    if (stepCount >= steps) {
                        clearInterval(interval);
                        this.landOnSpace();
                        return;
                    }
                    
                    this.currentSpace = (this.currentSpace + 1) % this.spaces.length;
                    const space = this.spaces[this.currentSpace];
                    
                    // Animate movement along orbit
                    this.playerToken.animate(200)
                        .move(space.x, space.y)
                        .ease('<>');
                    
                    stepCount++;
                }, 250);
            },

            landOnSpace() {
                this.isMoving = false;
                const space = this.spaces[this.currentSpace];
                
                // Show question
                this.showQuestion(space);
            },

            showQuestion(space) {
                // Get unused question
                let available = questionDB.filter((_, i) => !this.questionsUsed.has(i));
                if (available.length === 0) {
                    this.questionsUsed.clear();
                    available = questionDB;
                }
                
                const qIndex = Math.floor(Math.random() * available.length);
                const question = available[qIndex];
                this.questionsUsed.add(qIndex);
                
                const modal = document.getElementById('question-modal');
                const text = document.getElementById('question-text');
                const answers = document.getElementById('answers-container');
                
                text.innerHTML = `<strong>${space.element} - ${space.elementName}</strong><br><br>${question.q}`;
                answers.innerHTML = '';
                
                question.options.forEach((opt, idx) => {
                    const btn = document.createElement('button');
                    btn.className = 'answer-btn';
                    btn.textContent = opt;
                    btn.onclick = () => this.answerQuestion(idx === question.correct, space, question.fact);
                    answers.appendChild(btn);
                });
                
                modal.style.display = 'block';
            },

            answerQuestion(correct, space, fact) {
                const buttons = document.querySelectorAll('.answer-btn');
                buttons.forEach((btn, idx) => {
                    btn.disabled = true;
                    if (btn.textContent === questionDB.find(q => q.fact === fact).options[questionDB.find(q => q.fact === fact).correct]) {
                        btn.classList.add('correct');
                    } else if (btn === event.target && !correct) {
                        btn.classList.add('wrong');
                    }
                });
                
                setTimeout(() => {
                    document.getElementById('question-modal').style.display = 'none';
                    
                    if (correct) {
                        this.collectElement(space);
                    } else {
                        alert(`Not quite! ${fact}`);
                    }
                    
                    document.getElementById('roll-btn').textContent = 'üé≤ Roll Dice';
                    document.getElementById('roll-btn').disabled = false;
                }, 1500);
            },

            collectElement(space) {
                if (this.inventory.length < 6) {
                    this.inventory.push({
                        symbol: space.element,
                        name: space.elementName,
                        number: this.currentSpace + 1
                    });
                    
                    this.updateInventory();
                    this.checkWinCondition();
                    this.updateElementCard();
                    
                    // Visual feedback
                    this.createParticleEffect(space.x, space.y, '#00ff88');
                }
            },

            updateInventory() {
                this.inventory.forEach((item, idx) => {
                    const slot = document.getElementById(`slot-${idx}`);
                    slot.textContent = item.symbol;
                    slot.classList.add('filled');
                    slot.title = `${item.name} (${item.symbol})`;
                });
                
                // Update progress bar
                const progress = (this.inventory.length / this.targetMolecule.length) * 100;
                document.getElementById('progress-fill').style.width = Math.min(progress, 100) + '%';
            },

            updateElementCard() {
                if (this.inventory.length < this.targetMolecule.length) {
                    const target = this.targetMolecule[this.inventory.length];
                    const idx = this.elements.indexOf(target);
                    document.getElementById('target-element').innerHTML = `
                        <div class="atomic-number">${idx + 1}</div>
                        <div class="symbol">${target}</div>
                        <div class="element-name">${this.elementNames[idx]}</div>
                    `;
                    document.getElementById('target-element').style.opacity = '1';
                } else {
                    document.getElementById('target-element').innerHTML = `
                        <div class="atomic-number">‚úì</div>
                        <div class="symbol">‚úì</div>
                        <div class="element-name">Complete!</div>
                    `;
                }
            },

            checkWinCondition() {
                // Check if inventory matches target (simplified for demo)
                if (this.inventory.length >= 3) {
                    const hasH2O = this.inventory.filter(i => i.symbol === 'H').length >= 2 &&
                                  this.inventory.filter(i => i.symbol === 'O').length >= 1;
                    
                    if (hasH2O) {
                        setTimeout(() => this.victory(), 500);
                    }
                }
            },

            victory() {
                document.getElementById('victory-modal').style.display = 'block';
                this.createFireworks();
            },

            createFireworks() {
                for (let i = 0; i < 20; i++) {
                    setTimeout(() => {
                        const x = Math.random() * this.width;
                        const y = Math.random() * this.height;
                        this.createParticleEffect(x, y, `hsl(${Math.random() * 360}, 100%, 50%)`);
                    }, i * 100);
                }
            },

            createParticleEffect(x, y, color) {
                const particle = this.svg.circle(8)
                    .move(x, y)
                    .fill(color)
                    .animate(1000)
                    .opacity(0)
                    .move(x + (Math.random() - 0.5) * 100, y + (Math.random() - 0.5) * 100)
                    .after(() => particle.remove());
            },

            restart() {
                this.currentSpace = 0;
                this.inventory = [];
                this.questionsUsed.clear();
                this.isMoving = false;
                
                this.playerToken.move(this.spaces[0].x, this.spaces[0].y);
                this.initInventory();
                this.updateElementCard();
                document.getElementById('progress-fill').style.width = '0%';
                document.getElementById('victory-modal').style.display = 'none';
                document.getElementById('roll-btn').disabled = false;
            },

            handleResize() {
                // Debounce resize
                clearTimeout(this.resizeTimeout);
                this.resizeTimeout = setTimeout(() => {
                    location.reload();
                }, 500);
            }
        };

        // Start game when page loads
        window.addEventListener('DOMContentLoaded', () => {
            game.init();
        });
    </script>
</body>
</html>